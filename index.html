<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Складской учет</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">Склад</div>
      <nav class="main-nav" aria-label="Главное меню">
        <button type="button" class="main-nav__item" data-screen="dashboard">Показатели</button>
        <button type="button" class="main-nav__item is-active" data-screen="products">Товары</button>
        <button type="button" class="main-nav__item" data-screen="receipts">Приемки</button>
        <button type="button" class="main-nav__item" data-screen="shipments">Отгрузки</button>
      </nav>
      <div class="topbar-user">
        <span id="current-user-label">Гость</span>
        <button type="button" id="logout-btn" class="logout-btn">Выйти</button>
      </div>
    </header>

    <main class="layout">
      <section id="screen-dashboard" class="screen">
        <div class="subbar">
          <h1>Продажи</h1>
          <div class="period-switch" role="tablist" aria-label="Период графика">
            <button class="period-btn is-active" data-chart-period="day">День</button>
            <button class="period-btn" data-chart-period="month">Месяц</button>
            <button class="period-btn" data-chart-period="year">Год</button>
          </div>
        </div>

        <div class="kpi-grid">
          <article class="kpi-card">
            <h2>Выручка за день</h2>
            <p id="kpi-day" class="kpi-value">0 ₽</p>
          </article>
          <article class="kpi-card">
            <h2>Выручка за месяц</h2>
            <p id="kpi-month" class="kpi-value">0 ₽</p>
          </article>
          <article class="kpi-card">
            <h2>Выручка за год</h2>
            <p id="kpi-year" class="kpi-value">0 ₽</p>
          </article>
          <article class="kpi-card">
            <h2>Товаров в каталоге</h2>
            <p id="kpi-products" class="kpi-value">0</p>
          </article>
        </div>

        <section class="chart-panel">
          <div class="chart-head">
            <h2 id="chart-title">График выручки: день</h2>
            <p id="chart-total">Итого: 0 ₽</p>
          </div>
          <canvas id="revenue-chart" width="1200" height="400" aria-label="График выручки"></canvas>
        </section>
      </section>

      <section id="screen-products" class="screen is-active">
        <div class="subbar">
          <h1>Товары и услуги</h1>
        </div>

        <div class="products-toolbar">
          <button type="button" id="open-product-form">+ Товар</button>
          <button type="button" class="ghost-btn">+ Услуга</button>
          <button type="button" class="ghost-btn">+ Комплект</button>
          <button type="button" class="ghost-btn">+ Группа</button>
          <input id="products-search" type="text" placeholder="Наименование, код или артикул" />
        </div>

        <div id="product-form-wrap" class="product-form-wrap is-hidden">
          <form id="product-form" class="form-row" autocomplete="off">
            <input name="name" type="text" placeholder="Наименование" required />
            <input name="sku" type="text" placeholder="Код / артикул" required />
            <input name="unit" type="text" placeholder="Ед. изм. (шт)" value="шт" required />
            <input name="price" type="number" min="0" step="0.01" placeholder="Цена реализации" required />
            <input name="stock" type="number" min="0" step="1" placeholder="Количество" required />
            <button type="submit">Сохранить товар</button>
          </form>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Наименование</th>
                <th>Код</th>
                <th>Ед.</th>
                <th>Цена</th>
                <th>Остаток</th>
                <th>Действия</th>
              </tr>
            </thead>
            <tbody id="products-table"></tbody>
          </table>
        </div>
      </section>

      <section id="screen-receipts" class="screen">
        <div class="subbar">
          <h1>Приемка товара</h1>
        </div>

        <form id="receipt-form" class="form-row" autocomplete="off">
          <input id="receipt-product-id" name="productId" type="hidden" required />
          <button type="button" class="picker-btn" data-role="open-product-picker" data-target="receipt" id="receipt-product-label">
            Выбрать товар
          </button>
          <input name="quantity" type="number" min="1" step="1" placeholder="Количество" required />
          <input name="cost" type="number" min="0" step="0.01" placeholder="Закупочная цена (опц.)" />
          <button type="submit">Провести приемку</button>
        </form>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Дата</th>
                <th>Товар</th>
                <th>Количество</th>
                <th>Цена закупки</th>
                <th>Действия</th>
              </tr>
            </thead>
            <tbody id="receipts-table"></tbody>
          </table>
        </div>
      </section>

      <section id="screen-shipments" class="screen">
        <div class="subbar">
          <h1>Отгрузки</h1>
        </div>

        <form id="shipment-form" class="form-row" autocomplete="off" novalidate>
          <input id="shipment-product-id" name="productId" type="hidden" required />
          <button type="button" class="picker-btn" data-role="open-product-picker" data-target="shipment" id="shipment-product-label">
            Выбрать товар
          </button>
          <input name="quantity" type="number" min="1" step="1" placeholder="Количество" />
          <button type="button" id="add-shipment-line">Добавить позицию</button>
        </form>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Товар</th>
                <th>Количество</th>
                <th>Цена</th>
                <th>Сумма</th>
                <th>Действия</th>
              </tr>
            </thead>
            <tbody id="shipment-lines-table"></tbody>
          </table>
        </div>

        <div class="subbar">
          <h1 id="shipment-draft-total">Итого по отгрузке: 0 ₽</h1>
          <button type="submit" form="shipment-form" id="submit-shipment">Провести отгрузку</button>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Дата</th>
                <th>Позиций</th>
                <th>Сумма</th>
                <th>Действия</th>
              </tr>
            </thead>
            <tbody id="shipments-table"></tbody>
          </table>
        </div>
      </section>
    </main>

    <div id="product-picker-modal" class="modal" aria-hidden="true">
      <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="picker-title">
        <div class="modal__head">
          <h2 id="picker-title">Выбор товара</h2>
          <button type="button" id="close-picker" class="modal__close">Закрыть</button>
        </div>
        <input
          id="picker-search"
          class="picker-search-input"
          type="text"
          placeholder="Поиск товара: название, код, артикул"
          autocomplete="off"
        />

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Наименование</th>
                <th>Остаток</th>
                <th>Цена закупки</th>
                <th>Цена реализации</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="picker-products-table"></tbody>
          </table>
        </div>

        <form id="quick-product-form" class="quick-form" autocomplete="off">
          <h3>Добавить новый товар</h3>
          <input name="name" type="text" placeholder="Название" required />
          <input name="stock" type="number" min="0" step="1" placeholder="Количество" required />
          <input name="purchasePrice" type="number" min="0" step="0.01" placeholder="Цена закупки" required />
          <input name="salePrice" type="number" min="0" step="0.01" placeholder="Цена реализации" required />
          <button type="submit">Сохранить товар</button>
        </form>
      </div>
    </div>

    <div id="shipment-view-modal" class="modal" aria-hidden="true">
      <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="shipment-view-title">
        <div class="modal__head">
          <h2 id="shipment-view-title">Состав отгрузки</h2>
          <button type="button" id="close-shipment-view" class="modal__close">Закрыть</button>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Товар</th>
                <th>Количество</th>
                <th>Цена</th>
                <th>Сумма</th>
              </tr>
            </thead>
            <tbody id="shipment-view-table"></tbody>
          </table>
        </div>

        <div class="subbar">
          <h1 id="shipment-view-total">Итого: 0 ₽</h1>
        </div>
      </div>
    </div>

    <div id="product-edit-modal" class="modal" aria-hidden="true">
      <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="product-edit-title">
        <div class="modal__head">
          <h2 id="product-edit-title">Редактирование товара</h2>
          <button type="button" id="close-product-edit" class="modal__close">Закрыть</button>
        </div>
        <form id="product-edit-form" class="auth-form">
          <input type="hidden" name="id" />
          <input name="name" type="text" placeholder="Название товара" required />
          <input name="price" type="number" min="0" step="0.01" placeholder="Цена" required />
          <button type="submit">Сохранить</button>
        </form>
      </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <section id="auth-screen" class="auth-screen">
      <div class="auth-card">
        <h1>Вход в облачный склад</h1>
        <p id="auth-message" class="auth-message">Войдите как администратор.</p>

        <form id="login-form" class="auth-form">
          <input name="username" type="text" placeholder="Имя пользователя" required />
          <input name="password" type="password" placeholder="Пароль" required />
          <button type="submit">Войти</button>
        </form>
      </div>
    </section>

    <script defer src="./snake.js"></script>
  </body>
</html>
